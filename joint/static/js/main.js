"use strict";var templateModule=function(){var e=function(){t(),o()},t=function(){},o=function(){};return{init:e}}(),countModule=function(){var e=function(){o(),n()},t={countFormClass:".js--count-form",countResultClass:".js--count-result"},o=function(){r()},n=function(){},r=function(){var e=document.querySelector(t.countFormClass);if(!e)return console.info("Не работает модуль countModule: не найден "+t.countFormClass),!1;e.addEventListener("submit",function(e){e.preventDefault();var t=parseInt(this.querySelector('input[name="sum"]').value),o=parseInt(this.querySelector('input[name="percent"]').value),n=parseInt(this.querySelector('input[name="time"]').value),r=parseInt(this.querySelector('input[name="first"]').value),c=u(t,o,n,r);return!!s(c)||(console.error("Ошибка в countModule._countListener: _countUpdate вернул false"),!1)})},u=function(e,t,o,n){return(e-e*n/100)/o*t/100},s=function(e){var o=document.querySelector(t.countResultClass);return o?(o.innerText=e+" рублей",!0):(console.error("Ошибка в _countUpdate: не найден "+t.countResultClass),!1)};return{init:e}}(),formsModule=function(){var e=function(){o(),n()},t={formsClass:".js--form",inputClass:"input",msgClass:"textarea",inputNames:["tel","email"]},o=function(){r()},n=function(){},r=function(){var e=document.querySelectorAll(t.formsClass);Array.prototype.forEach.call(e,function(e,o){e.addEventListener("submit",function(o){o.preventDefault();var n,r=e.querySelectorAll(t.inputClass),s=e.method,c=e.action,a=e.dataset.msg,l=!1,i=!1,p=e.querySelector(t.msgClass)||!1;return s&&c?(Array.prototype.forEach.call(r,function(e,t){"tel"===e.name&&(l=e.value),"email"===e.name&&(i=e.value)}),p&&(p=p.value),l||i?(l||(l="Не заполнено"),i||(i="Не заполнено"),p||(p="Не заполнено"),n={tel:l,email:i,msg:p},u(n,s,c,a),!0):(console.error("Ошибка в formsModule._formsBindSubmit: у формы "+e+" не заполнены контактные данные."),popupModule.showError("Пожалуйста, введите ваши контактные данные!"),!1)):(console.error("Ошибка в formsModule._formsBindSubmit: у формы "+e+" наличие method: "+s+" наличие action: "+c),!1)})})},u=function(e,t,o,n){var r=new XMLHttpRequest;r.open(t,o),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(JSON.stringify(e)),r.onreadystatechange=function(){return 4!=r.readyState&&console.error("Ошибка в formsModule._sendAction: статус xhr запроса не 4."),200!=r.status?(console.error("Ошибка в formsModule._sendAction: ответ сервера: "+r.status+" "+r.statusText),popupModule.showError("Что-то пошло не так. Пока мы решаем проблему, позвоните нам!"),!1):(console.info("Ответ сервера в formsModule._sendAction: "+r.responseText),popupModule.showSuccess(n),!0)}};return{init:e}}(),mainModule=function(){var e=function(){t(),o()},t=function(){},o=function(){popupModule.init(),countModule.init(),formsModule.init()};return{init:e}}(),popupModule=function(){var e=function(){o(),n()},t={popups:["order","call","register-seminar","action","question","order-get","partners","consult","buy","plans"],successPopupClass:".popup--js-success",errorPopupClass:".popup--js-error",popupTextClass:".popup__text"},o=function(){},n=function(){s(),a()},r=function(e){if(u()){if(!e)return!1;var t=document.querySelector(".overlay");return e.classList.add("popup--active"),t&&t.classList.add("overlay--active"),!0}},u=function(e){e||(e=document.querySelector(".popup--active"));var t=document.querySelector(".overlay");return e&&e.classList.remove("popup--active"),t&&t.classList.remove("overlay--active"),!0},s=function(){var e=document.querySelectorAll(".popup"),t=document.querySelector(".overlay");e&&Array.prototype.forEach.call(e,function(e,t){var o=e.querySelectorAll(".js--close-popup");Array.prototype.forEach.call(o,function(t,o){t.addEventListener("click",function(t){t.preventDefault(),u(e)})})}),t&&t.addEventListener("click",function(e){e.preventDefault(),u()})},c=function(e){var t=document.querySelectorAll(".js--show-"+e+"-popup"),o=document.querySelector(".popup--js-"+e);Array.prototype.forEach.call(t,function(e,t){e.addEventListener("click",function(e){e.preventDefault(),r(o)})})},a=function(){for(var e in t.popups)document.querySelector(".popup--js-"+t.popups[e])&&c(t.popups[e])};return{init:e,showError:function(e){var o=document.querySelector(t.errorPopupClass),n=o.querySelector(t.popupTextClass);return e||(e="Что-то пошло не так. Попробуйте снова!"),n.innerText=e,r(o)},showSuccess:function(e){var o=document.querySelector(t.successPopupClass),n=o.querySelector(t.popupTextClass);return e||(e="Всё получилось!"),n.innerText=e,r(o)}}}();mainModule.init();